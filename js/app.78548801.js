(function(t){function e(e){for(var s,o,c=e[0],i=e[1],d=e[2],u=0,m=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);l&&l(e);while(m.length)m.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,c=1;c<a.length;c++){var i=a[c];0!==n[i]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var l=i;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00fd":function(t,e,a){"use strict";a("231b")},"09b8":function(t,e,a){"use strict";a("7dac")},"0e7c":function(t,e,a){"use strict";a("130b")},"130b":function(t,e,a){},1719:function(t,e,a){},"231b":function(t,e,a){},"50ff":function(t,e,a){"use strict";a("f5d2")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("7a23");const n={id:"main-holder"};function r(t,e,a,r,o,c){const i=Object(s["o"])("RestaurantsList"),d=Object(s["o"])("CustomMap"),l=Object(s["o"])("ModalRestaurant");return Object(s["i"])(),Object(s["c"])("div",n,[Object(s["f"])(i),Object(s["f"])(d),t.showModal?(Object(s["i"])(),Object(s["c"])(l,{key:0})):Object(s["d"])("",!0)])}const o=Object(s["v"])("data-v-3c009900"),c=o((t,e,a,n,r,c)=>{const i=Object(s["o"])("MapMarker"),d=Object(s["o"])("GMapLoader");return Object(s["i"])(),Object(s["c"])(d,{onMapInitialized:c.addInitMarkers,onNewMarker:t.addMarker},{default:o(({google:e,map:a})=>[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(t.markers,t=>(Object(s["i"])(),Object(s["c"])(i,{key:t.id,name:t.name,id:t.id,position:t.position,google:e,map:a},null,8,["name","id","position","google","map"]))),128))]),_:1},8,["onMapInitialized","onNewMarker"])});var i=a("5502"),d={name:"MapMarker",props:{google:Object,map:Object,position:Object,key:String,id:String,name:String},data:function(){return{marker:null}},methods:{...Object(i["b"])("modal",["toggleModal","setInfosModal"])},mounted:function(){this.marker=new this.google.maps.Marker({map:this.map,position:this.position,title:this.name,label:this.name}),"user"!=this.id&&this.marker.addListener("click",()=>{this.setInfosModal(this.id),this.toggleModal(!0)})},__scopeId:"data-v-077e6d16"},l=d;const u=Object(s["v"])("data-v-77d0c6da");Object(s["k"])("data-v-77d0c6da");const m={id:"map",ref:"map"};Object(s["j"])();const b=u((t,e,a,n,r,o)=>{const c=Object(s["o"])("GPlacesAPI");return Object(s["i"])(),Object(s["c"])(s["a"],null,[Object(s["f"])("div",m,null,512),Boolean(t.google)&&Boolean(t.map)?(Object(s["i"])(),Object(s["c"])(s["a"],{key:0},[Object(s["n"])(t.$slots,"default",{google:t.google,map:t.map},void 0,!0),Object(s["f"])(c,{ref:"gPlacesApi",places:t.places,map:t.map},null,8,["places","map"])],64)):Object(s["d"])("",!0)],64)});var p={name:"GPlacesAPI",props:{places:Object,map:Object},methods:{updateRestaurantList(){},addNearbyPlaces(){this.places.nearbySearch({bounds:this.map.getBounds(),types:["restaurant","food","establishment","point_of_interest"]},t=>{let e=this.excludeTypes(t);console.log(e),e=this.excludeDuplicates(e),console.log(e),e.forEach(t=>{let e=this.formateRestaurantInfos(t);this.addRestaurant(e),this.addMarker({id:e.id,name:e.restaurantName,position:{lat:e.lat,lng:e.long}}),this.addPlaceReviews(t.place_id,e.id)})})},excludeDuplicates(t){const e=this.getGplacesRestaurants;return t.filter(t=>!e.some(e=>e.gplacesId==t.place_id))},excludeTypes(t){const e=["campground","lodging","store","bakery"],a=t.filter(t=>!e.some(e=>t.types.includes(e)));return a},formateRestaurantInfos(t){const e={restaurantName:t.name,address:t.vicinity,lat:t.geometry.location.lat(),long:t.geometry.location.lng(),id:this.getNextRestaurantId,from:"gplaces",gplacesId:t.place_id,averageRating:0,ratings:[]};return e},addPlaceReviews(t,e){this.places.getDetails({placeId:t},(a,s)=>{if("OK"===s){const t=this.formateReviews(a.reviews);this.setReviewsListToRestaurant({reviews:t,id:e})}else"OVER_QUERY_LIMIT"==s?setTimeout(()=>{console.log("retry getting place details"),this.addPlaceReviews(t,e)},550):console.log(s)})},formateReviews(t=[]){let e=[];return t.forEach(t=>{e.push({comment:t.text,stars:t.rating})}),e},...Object(i["b"])("restaurantsList",["addRestaurant","setReviewsListToRestaurant"]),...Object(i["b"])("map",["addMarker"])},computed:{...Object(i["c"])("restaurantsList",["getNextRestaurantId","getRestaurantFromId","getGplacesRestaurants"])},mounted(){console.log("GPlacesAPI component mounted")},__scopeId:"data-v-2a922fb8"},g=p,O=a("4272");const j={zoom:14,disableDefaultUI:!0,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"off"}]}]};var f={name:"GMapLoader",components:{GPlacesAPI:g},data:function(){return{apiKey:"your_key",google:null,geocoder:null,places:null,map:null,loader:!1}},methods:{initMap(){const t=this.$refs.map;this.map=new this.google.maps.Map(t,j),console.log("Map init"),this.google.maps.event.addListenerOnce(this.map,"idle",()=>{this.map.addListener("idle",()=>{this.$refs.gPlacesApi.addNearbyPlaces()})}),this.map.addListener("click",this.addRestaurantOnMap)},setToUserPosition(){navigator.geolocation.getCurrentPosition(t=>{const e={lat:t.coords.latitude,lng:t.coords.longitude};this.map.setCenter(e),this.$emit("mapInitialized",e)})},addRestaurantOnMap(t){const e={lat:t.latLng.lat(),long:t.latLng.lng()};let a=this;this.geocoder.geocode({location:{lat:t.latLng.lat(),lng:t.latLng.lng()}},t=>{a.setPositionNewRestaurantInfos({address:t[0].formatted_address,coords:e}),a.toggleNewRestaurant(!0)})},...Object(i["b"])("restaurantsList",["toggleNewRestaurant","setPositionNewRestaurantInfos","addRestaurant"]),...Object(i["b"])("map",["addMarker"])},computed:{...Object(i["d"])(["googleApiKey"]),...Object(i["d"])({restaurants:t=>t.restaurantsList.restaurants})},async mounted(){console.log("GMapLoader component mounted");const t=new O["a"]({apiKey:this.apiKey,libraries:["places"]}),e=await t.load().then((function(){return window.google}));this.google=e,this.geocoder=new this.google.maps.Geocoder,this.initMap(),this.setToUserPosition(),this.places=new this.google.maps.places.PlacesService(this.map),console.log("Nearby places call")}};a("be0a");f.render=b,f.__scopeId="data-v-77d0c6da";var h=f,R={name:"CustomMap",components:{MapMarker:l,GMapLoader:h},data:function(){return{}},methods:{addInitMarkers(t){this.addUserMarker(t);for(let e=0;e<this.restaurants.length;e++)this.addRestaurantMarker(this.restaurants[e])},addUserMarker(t){const e={position:t,id:"user",name:"Utilisateur"};this.addMarker(e)},addRestaurantMarker(t){const e={position:{lat:t.lat,lng:t.long},id:t.id,name:t.restaurantName};this.addMarker(e)},...Object(i["b"])("map",["addMarker","removeMarker"])},computed:{...Object(i["d"])({restaurants:t=>t.restaurantsList.restaurants,markers:t=>t.map.markers})},mounted(){console.log("CustomMap component mounted")}};R.render=c,R.__scopeId="data-v-3c009900";var v=R;const M=Object(s["v"])("data-v-42e41b3b");Object(s["k"])("data-v-42e41b3b");const I={id:"restaurants-list"},A={class:"ctrls"},_={class:"order"},S={class:"sort"},w=Object(s["f"])("span",null,"De",-1),N=Object(s["f"])("span",null,"à",-1),T={class:"c-scrollbar"};Object(s["j"])();const k=M((t,e,a,n,r,o)=>{const c=Object(s["o"])("BIconSortNumericDown"),i=Object(s["o"])("BIconSortNumericUpAlt"),d=Object(s["o"])("RestaurantItem"),l=Object(s["o"])("RestaurantItemNew");return Object(s["i"])(),Object(s["c"])("div",I,[Object(s["f"])("div",A,[Object(s["f"])("div",_,[Object(s["f"])("button",{class:["btn",["asc"==t.order?"selected":""]],onClick:e[1]||(e[1]=t=>o.sortRestaurantsByNote("asc"))},[Object(s["f"])(c)],2),Object(s["f"])("button",{class:["btn",["desc"==t.order?"selected":""]],onClick:e[2]||(e[2]=t=>o.sortRestaurantsByNote("desc"))},[Object(s["f"])(i)],2)]),Object(s["f"])("div",S,[w,Object(s["f"])("select",{name:"min",onChange:e[3]||(e[3]=t=>o.minSort(t))},[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(t.sortRange,e=>(Object(s["i"])(),Object(s["c"])("option",{value:e,key:e,selected:e==t.sortMin},Object(s["p"])(e),9,["value","selected"]))),128))],32),N,Object(s["f"])("select",{name:"max",onChange:e[4]||(e[4]=t=>o.maxSort(t))},[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(t.sortRange,e=>(Object(s["i"])(),Object(s["c"])("option",{value:e,key:e,selected:e==t.sortMax},Object(s["p"])(e),9,["value","selected"]))),128))],32)])]),Object(s["f"])("ul",T,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(o.sortedRestaurants,t=>(Object(s["i"])(),Object(s["c"])(d,{key:t.id,id:t.id,name:t.restaurantName,address:t.address,ratings:t.ratings},null,8,["id","name","address","ratings"]))),128))]),t.isAddingNew?(Object(s["i"])(),Object(s["c"])(l,{key:0})):Object(s["d"])("",!0)])}),E=Object(s["v"])("data-v-7f0e462b");Object(s["k"])("data-v-7f0e462b");const y={class:"name"},L={class:"address"},x={class:"rating"},P={class:"rating-average"},U={class:"nb-ratings"};Object(s["j"])();const C=E((t,e,a,n,r,o)=>{const c=Object(s["o"])("BIconStarFill"),i=Object(s["o"])("BIconStarHalf"),d=Object(s["o"])("BIconStar");return Object(s["i"])(),Object(s["c"])("li",{class:{selected:o.isSelected},onClick:e[1]||(e[1]=(...t)=>o.showDetails&&o.showDetails(...t))},[Object(s["f"])("span",y,Object(s["p"])(a.name),1),Object(s["f"])("span",L,Object(s["p"])(a.address),1),Object(s["f"])("div",x,[Object(s["f"])("div",P,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(Math.floor(o.ratingAverage),t=>(Object(s["i"])(),Object(s["c"])(c,{key:t}))),128)),o.ratingHasDecimal?(Object(s["i"])(),Object(s["c"])(i,{key:0})):Object(s["d"])("",!0),(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(Math.floor(o.oppositeRatingAverage),t=>(Object(s["i"])(),Object(s["c"])(d,{key:t}))),128)),Object(s["f"])("span",U," ("+Object(s["p"])(a.ratings.length)+")",1)])])],2)});var D={name:"RestaurantItem",props:{id:Number,name:String,address:String,ratings:Array},data(){return{}},methods:{showDetails:function(){this.setInfosModal(this.id),this.toggleModal(!0),this.isSelected=!0},...Object(i["b"])("modal",["toggleModal","setInfosModal"])},computed:{ratingAverage:function(){let t=0;for(let e=0;e<this.ratings.length;e++)t+=this.ratings[e].stars;return t/this.ratings.length},oppositeRatingAverage(){return 5-this.ratingAverage},ratingHasDecimal(){return-1!=this.ratingAverage.toString().indexOf(".")},isSelected(){return null!==this.restaurantModal&&this.id===this.restaurantModal.id},...Object(i["d"])({restaurantModal:t=>t.modal.restaurantModal})},mounted(){}};a("0e7c");D.render=C,D.__scopeId="data-v-7f0e462b";var B=D;const G=Object(s["v"])("data-v-9d15eed2");Object(s["k"])("data-v-9d15eed2");const F={class:"new-restaurant"},V={class:"infos"},K={class:"adress"};Object(s["j"])();const W=G((t,e,a,n,r,o)=>(Object(s["i"])(),Object(s["c"])("div",F,[Object(s["f"])("div",V,[Object(s["t"])(Object(s["f"])("input",{type:"text",name:"name","onUpdate:modelValue":e[1]||(e[1]=e=>t.newRestaurantInfos.name=e),class:{error:o.nameError},ref:"restaurantName",form:"form-new-restaurant",placeholder:"Nom du restaurant"},null,2),[[s["r"],t.newRestaurantInfos.name]]),Object(s["f"])("span",K,Object(s["p"])(t.newRestaurantInfos.address),1)]),Object(s["f"])("form",{action:"#",id:"form-new-restaurant",onSubmit:e[4]||(e[4]=Object(s["u"])(()=>{},["prevent"]))},[Object(s["f"])("button",{class:"btn-add",onClick:e[2]||(e[2]=(...t)=>o.addRestaurantClick&&o.addRestaurantClick(...t))},"+"),Object(s["f"])("button",{class:"btn-cancel",onClick:e[3]||(e[3]=(...t)=>o.cancelRestaurantAddingClick&&o.cancelRestaurantAddingClick(...t))},"x")],32)])));var H={name:"RestaurantItemNew",data(){return{}},methods:{addRestaurantClick(){if(null==this.newRestaurantInfos.name)return;const t={restaurantName:this.newRestaurantInfos.name,address:this.newRestaurantInfos.address,lat:this.newRestaurantInfos.coords.lat,long:this.newRestaurantInfos.coords.long,id:this.getNextRestaurantId,averageRating:0,ratings:[]};this.addRestaurant(t),this.addMarker({position:{lat:t.lat,lng:t.long},id:t.id,name:t.restaurantName}),this.toggleNewRestaurant(!1),this.resetNewRestauranInfos()},cancelRestaurantAddingClick(){this.toggleNewRestaurant(!1),this.resetNewRestauranInfos()},...Object(i["b"])("restaurantsList",["addRestaurant","toggleNewRestaurant","resetNewRestauranInfos"]),...Object(i["b"])("map",["addMarker"])},computed:{nameError(){return null==this.newRestaurantInfos.name||""==this.newRestaurantInfos.name},...Object(i["d"])({newRestaurantInfos:t=>t.restaurantsList.newRestaurantInfos}),...Object(i["c"])("restaurantsList",["getNextRestaurantId"])},mounted(){this.$refs.restaurantName.focus()}};a("09b8");H.render=W,H.__scopeId="data-v-9d15eed2";var z=H,$={name:"RestaurantsList",components:{RestaurantItem:B,RestaurantItemNew:z},data:function(){return{order:null,sortMin:0,sortMax:5,sortRange:[0,1,2,3,4,5]}},methods:{sortRestaurantsByNote(t){const e=this.restaurants,a="asc"==t?1:-1;e.sort((t,e)=>t.averageRating*a-e.averageRating*a),this.order=t},minSort(t){this.sortMin=Number(t.target.value),this.sortMin>this.sortMax&&(this.sortMax=this.sortMin)},maxSort(t){this.sortMax=Number(t.target.value),this.sortMax<this.sortMin&&(this.sortMin=this.sortMax)}},computed:{sortedRestaurants:function(){return this.restaurants.filter(t=>t.averageRating>=this.sortMin&&t.averageRating<=this.sortMax)},...Object(i["d"])({restaurants:t=>t.restaurantsList.restaurants,isAddingNew:t=>t.restaurantsList.isAddingNew})}};a("00fd");$.render=k,$.__scopeId="data-v-42e41b3b";var J=$;const q=Object(s["v"])("data-v-21fe282a");Object(s["k"])("data-v-21fe282a");const Q={class:"modal"},X={class:"modal-content"},Y={class:"modal-header"},Z={class:"modal-body"},tt={class:"infos"},et={class:"name"},at={class:"address"},st={class:"comments"},nt={class:"c-scrollbar"},rt={key:0,class:"no-comment"},ot={class:"new-comment"},ct=Object(s["f"])("option",{disabled:"",value:""},"Note",-1);Object(s["j"])();const it=q((t,e,a,n,r,o)=>{const c=Object(s["o"])("GStreetViewImage"),i=Object(s["o"])("Comment");return Object(s["i"])(),Object(s["c"])("div",{class:"modal-holder",ref:"holder",onClick:e[5]||(e[5]=(...t)=>o.closeModalFromBackground&&o.closeModalFromBackground(...t))},[Object(s["f"])("div",Q,[Object(s["f"])("div",X,[Object(s["f"])("div",Y,[Object(s["f"])("span",{class:"close",onClick:e[1]||(e[1]=(...t)=>o.closeModal&&o.closeModal(...t))},"X")]),Object(s["f"])("div",Z,[Object(s["f"])("div",tt,[Object(s["f"])("p",et,Object(s["p"])(t.restaurantModal.restaurantName),1),Object(s["f"])("p",at,Object(s["p"])(t.restaurantModal.address),1),Object(s["f"])(c,{address:t.restaurantModal.address},null,8,["address"])]),Object(s["f"])("div",st,[Object(s["f"])("ul",nt,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(t.restaurantModal.ratings,t=>(Object(s["i"])(),Object(s["c"])(i,{key:t.id,text:t.comment,rating:t.stars},null,8,["text","rating"]))),128)),0==t.restaurantModal.ratings.length?(Object(s["i"])(),Object(s["c"])("li",rt,"Aucun commentaire posté")):Object(s["d"])("",!0)]),Object(s["f"])("div",ot,[Object(s["t"])(Object(s["f"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.commentText=e),placeholder:"Votre commentaire..."},null,512),[[s["r"],t.commentText]]),Object(s["t"])(Object(s["f"])("select",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.commentRating=e)},[ct,(Object(s["i"])(),Object(s["c"])(s["a"],null,Object(s["m"])(6,t=>Object(s["f"])("option",{key:t-1,value:t-1},Object(s["p"])(t-1),9,["value"])),64))],512),[[s["q"],t.commentRating]]),Object(s["f"])("button",{class:"btn",onClick:e[4]||(e[4]=(...t)=>o.addNewComment&&o.addNewComment(...t))},"OK")])])])])])],512)}),dt=Object(s["v"])("data-v-7fdda201");Object(s["k"])("data-v-7fdda201");const lt={class:"rating"},ut=Object(s["e"])(),mt=Object(s["f"])("br",null,null,-1),bt={class:"comment"};Object(s["j"])();const pt=dt((t,e,a,n,r,o)=>{const c=Object(s["o"])("BIconStarFill"),i=Object(s["o"])("BIconStar");return Object(s["i"])(),Object(s["c"])("li",null,[Object(s["f"])("span",lt,[(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(a.rating,t=>(Object(s["i"])(),Object(s["c"])(c,{key:t}))),128)),(Object(s["i"])(!0),Object(s["c"])(s["a"],null,Object(s["m"])(o.oppositeRating,t=>(Object(s["i"])(),Object(s["c"])(i,{key:t}))),128))]),ut,mt,Object(s["f"])("span",bt,Object(s["p"])(a.text),1)])});var gt={name:"Comment",props:{text:String,rating:Number},computed:{oppositeRating(){return 5-this.rating}}};gt.render=pt,gt.__scopeId="data-v-7fdda201";var Ot=gt;const jt=Object(s["v"])("data-v-f4554a7c"),ft=jt((t,e,a,n,r,o)=>(Object(s["i"])(),Object(s["c"])("img",{src:o.imageURL},null,8,["src"])));var ht={name:"GStreetViewImage",props:{address:String},methods:{},mounted(){console.log(this.imageURL)},computed:{...Object(i["d"])(["googleApiKey"]),imageURL(){return"https://maps.googleapis.com/maps/api/streetview?location="+this.parsedAddress+"&size=300x200&key="+this.googleApiKey},parsedAddress(){return this.address.split(" ").join("+")}}};ht.render=ft,ht.__scopeId="data-v-f4554a7c";var Rt=ht,vt={name:"ModalRestaurant",components:{Comment:Ot,GStreetViewImage:Rt},data:function(){return{commentRating:"",commentText:void 0}},methods:{closeModalFromBackground(t){t.target==this.$refs.holder&&this.closeModal()},closeModal(){this.toggleModal(!1)},addNewComment(){""!=this.commentRating&&void 0!=this.commentText&&(this.restaurantModal.ratings.push({stars:this.commentRating,comment:this.commentText}),this.resetInputs())},resetInputs(){this.commentRating="",this.commentText=void 0},...Object(i["b"])("modal",["toggleModal"])},computed:{...Object(i["d"])({restaurantModal:t=>t.modal.restaurantModal})}};a("7155");vt.render=it,vt.__scopeId="data-v-21fe282a";var Mt=vt,It={name:"App",components:{CustomMap:v,RestaurantsList:J,ModalRestaurant:Mt},methods:{...Object(i["b"])("restaurantsList",["initRestaurantsList"])},mounted(){this.initRestaurantsList()},computed:{...Object(i["d"])({showModal:t=>t.modal.showModal})}};a("50ff");It.render=r;var At=It;const _t=[{restaurantName:"Bronco",address:"39 Rue des Petites Écuries, 75010 Paris",lat:43.218141,long:5.7332463,ratings:[{stars:4,comment:"Un excellent restaurant, j'y reviendrai ! Par contre il vaut mieux aimer la viande."},{stars:5,comment:"Tout simplement mon restaurant préféré !"}]},{restaurantName:"Babalou",address:"4 Rue Lamarck, 75018 Paris",lat:43.2073059,long:5.7343181,ratings:[{stars:5,comment:"Une minuscule pizzeria délicieuse cachée juste à côté du Sacré choeur !"},{stars:3,comment:"J'ai trouvé ça correct, sans plus"}]}],St={namespaced:!0,state:()=>({restaurants:[],isAddingNew:!1,newRestaurantInfos:{name:null,address:null,coords:null}}),getters:{getNextRestaurantId(t){let e=1;return t.restaurants.forEach((function(t){t.id>=e&&(e+=1)})),e},getRestaurantFromId(t){return e=>t.restaurants.find(t=>t.id==e)},getGplacesRestaurants(t){return t.restaurants.filter(t=>"gplaces"===t.from)}},mutations:{SETUP_RESTAURANTS_LIST(t){t.restaurants=_t.slice()},TOGGLE_NEW_RESTAURANT(t,e){t.isAddingNew=e},SET_POSITION_NEW_RESTAURANT(t,e){t.newRestaurantInfos.address=e.address,t.newRestaurantInfos.coords=e.coords},RESET_NEW_RESTAURANT_INFOS(t){t.newRestaurantInfos.name=null,t.newRestaurantInfos.address=null},ADD_RESTAURANT(t,e){t.restaurants.push(e)},REPLACE_RESTAURANT_LIST(t,e){t.restaurants=e},SET_ID_TO_RESTAURANTS(t,e){t.restaurants[e.index].id=e.id},SET_AVERAGE_RATING_RESTAURANTS(t,e){t.restaurants[e.index].averageRating=e.rating},SET_REVIEWS_LIST_TO_RESTAURANT(t,e){const a=t.restaurants.findIndex(t=>t.id==e.id);-1!=a&&(t.restaurants[a].ratings=e.reviews)}},actions:{setReviewsListToRestaurant(t,e){t.commit("SET_REVIEWS_LIST_TO_RESTAURANT",e),t.dispatch("updateRestaurantAverage",e.id)},toggleNewRestaurant(t,e){t.commit("TOGGLE_NEW_RESTAURANT",e)},setPositionNewRestaurantInfos(t,e){t.commit("SET_POSITION_NEW_RESTAURANT",e)},resetNewRestauranInfos(t){t.commit("RESET_NEW_RESTAURANT_INFOS")},addRestaurant(t,e){t.commit("ADD_RESTAURANT",e)},replaceRestaurantsList(t,e){t.commit("REPLACE_RESTAURANT_LIST",e)},updateRestaurantAverage(t,e){const a=this.getters.getRestaurantFromId(e).ratings;let s=0;a.forEach(t=>{s+=t.stars});const n=s/a.length||0,r=this.state.restaurantsList.restaurants.findIndex(t=>t.id==e);t.commit("SET_AVERAGE_RATING_RESTAURANTS",{index:r,rating:n})},updateAllRestaurantsAverage(t){for(let e=0;e<this.state.restaurantsList.restaurants.length;e++)t.dispatch("updateRestaurantAverage",this.state.restaurants[e].id)},initRestaurantsList(t){t.commit("SETUP_RESTAURANTS_LIST");for(let e=0;e<this.state.restaurantsList.restaurants.length;e++){t.commit("SET_ID_TO_RESTAURANTS",{index:e,id:e});const a=this.state.restaurantsList.restaurants[e].ratings;let s=0;a.forEach(t=>{s+=t.stars});const n=s/a.length;t.commit("SET_AVERAGE_RATING_RESTAURANTS",{index:e,rating:n})}}}},wt={namespaced:!0,state:()=>({showModal:!1,restaurantModal:null}),getters:{},mutations:{SHOW_MODAL(t){t.showModal=!0},HIDE_MODAL(t){t.showModal=!1,t.restaurantModal=null},SET_INFOS_MODAL(t,e){t.restaurantModal=e}},actions:{toggleModal(t,e){e?t.commit("SHOW_MODAL"):t.commit("HIDE_MODAL")},setInfosModal(t,e){const a=this.getters.getRestaurantFromId(e);t.commit("SET_INFOS_MODAL",a)}}},Nt={namespaced:!0,state:()=>({markers:[]}),getters:{getMarkerIndexFromId(t){let e;return this.state.markers.forEach((a,s)=>{a.id==t&&(e=s)}),e}},mutations:{ADD_MARKER(t,e){t.markers.push(e)},REMOVE_MARKER(t,e){t.markers.splice(e,1)}},actions:{addMarker(t,e){t.commit("ADD_MARKER",e)},removeMarker(t,e){let a=this.getters.getMarkerIndexFromId(e);t.commit("REMOVE_MARKER",a)}}};var Tt=Object(i["a"])({state:{googleApiKey:"AIzaSyB60Ffk7jJMPVEeAwu70s__cHmB5Dxr6C8"},getters:{getRestaurantFromId(t){return e=>t.restaurantsList.restaurants.find(t=>t.id==e)}},mutations:{},actions:{},modules:{restaurantsList:St,modal:wt,map:Nt}}),kt=a("5089");const Et=Object(s["b"])(At).use(Tt);Et.component("BIconStar",kt["c"]),Et.component("BIconStarFill",kt["d"]),Et.component("BIconStarHalf",kt["e"]),Et.component("BIconSortNumericDown",kt["a"]),Et.component("BIconSortNumericUpAlt",kt["b"]),Et.mount("#app")},7155:function(t,e,a){"use strict";a("7de4")},"7dac":function(t,e,a){},"7de4":function(t,e,a){},be0a:function(t,e,a){"use strict";a("1719")},f5d2:function(t,e,a){}});
//# sourceMappingURL=app.78548801.js.map